import requests
from common.finish_plan_urlenverment import *
bookidlist=[1876,
1877,
1878,
1879,
1307,
1308,
1309,
1310,
1313,
1959,
1348,
1962,
1300,
1301,
2470,
2026,
2463,
60,
81,
2038,
83,
676,
365,
58,
2444,
2757,
92,
2486,
2039,
359,
379,
2441,
55,
56,
2751,
1774,
65,
367,
2436,
314,
2851,
323,
91,
2483,
57,
2452,
62,
678,
1773,
82,
1769,
90,
1771,
136,
145,
2764,
142,
336,
2763,
143,
2815,
2053,
1786,
1782,
1785,
2767,
2769,
1778,
128,
114,
2051,
1776,
129,
130,
111,
2761,
146,
134,
2765,
123,
342,
1781,
118,
1780,
125,
2439,
139,
140,
1790,
1791,
1788,
131,
121,
404,
402,
151,
2773,
153,
2789,
394,
416,
1796,
168,
1798,
397,
204,
205,
2785,
150,
2777,
169,
1805,
346,
2037,
163,
1797,
1802,
2839,
406,
162,
2042,
2453,
2792,
347,
2454,
2040,
1814,
2462,
161,
1803,
1813,
172,
1793,
407,
2779,
157,
1817,
440,
1815,
2062,
1824,
1819,
447,
1826,
2469,
190,
432,
782,
184,
433,
1820,
2058,
781,
188,
1830,
2057,
191,
175,
194,
2060,
442,
2772,
197,
1818,
781,
185,
182,
1831,
2774,
1816,
174,
178,
669,
783,
449,
192,
436,
2768,
2541,
201,
492,
2056,
2858,
353,
785,
1846,
2501,
2050,
1836,
1843,
1840,
2790,
223,
675,
683,
2050,
1838,
210,
354,
2361,
350,
219,
2780,
663,
2784,
485,
209,
2499,
229,
615,
671,
674,
207,
490,
478,
216,
786,
217,
230,
241,
2066,
256,
2070,
251,
1861,
2797,
1860,
2505,
260,
1858,
2069,
497,
240,
1848,
1861,
793,
2063,
500,
1855,
2796,
498,
2853,
496,
1865,
2795,
237,
253,
263,
2794,
248,
254,
251,
489,
1864,
261,
494,
250,
257,
487,
789,
289,
243,
2503,
259,
491,
236,
239,
247,
279,
2489,
264,
2073,
477,
2446,
801,
2086,
2498,
358,
2457,
276,
266,
479,
2081,
2440,
2079,
281,
801,
465,
265,
558,
2518,
2090,
2799,
274,
466,
271,
2861,
2075,
797,
2068,
464,
477,
284,
268,
2491,
282,
278,
462,
285,
469,
269,
70,
2801,
794,
852,
1238,
2103,
2085,
2508,
302,
2091,
305,
2092,
2080,
368,
301,
2804,
2513,
306,
295,
644,
2101,
2098,
2095,
688,
543,
2100,
2798,
646,
2863,
2808,
312,
311,
310,
2106,
304,
647,
2077,
542,
307,
645,
2091,
2800,
2097,
2078,
294,
369,
641,
640,
309,
290,
297,
547,
571,
2819,
562,
2817,
2119,
555,
573,
569,
546,
2111,
2105,
2820,
2859,
2517,
2836,
2821,
2115,
2107,
2114,
2123,
2822,
567,
2850,
2823,
2112,
2859,
553,
649,
549,
572,
554,
559,
545,
648,
551,
637,
557,
2117,
650,
651,
587,
2516,
2130,
589,
2118,
2135,
690,
2137,
680,
574,
578,
2134,
682,
2131,
597,
2147,
596,
598,
604,
2127,
595,
601,
586,
599,
2133,
2118,
2829,
2854,
592,
656,
591,
575,
602,
2130,
2132,
2826,
590,
2138,
2245,
2141,
2827,
585,
992,
2129,
652,
654,
655,
575,
620,
623,
618,
609,
2510,
658,
2213,
715,
2211,
659,
605,
625,
918,
2209,
2173,
2155,
636,
622,
828,
2195,
2194,
612,
2203,
626,
2140,
2158,
606,
2510,
607,
630,
629,
608,
632,
928,
633,
371,
370,
617,
816,
2530,
2526,
823,
807,
2524,
2218,
1008,
819,
2535,
1016,
824,
820,
2200,
825,
814,
2198,
2171,
778,
2224,
2204,
810,
818,
822,
803,
817,
802,
2230,
2221,
808,
2164,
821,
804,
811,
2180,
2212,
805,
2519,
806]

list223=[223]

def checkreadunder(id):
    baseurl=urlenverment(2)
    url=baseurl+'v1/book/comprehension'
    data={
    "book_id": id,
    "uid": 1640976882862985217
}

    header = {
        'Authorization': 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJqdGkiOiIxNjQwOTc2ODgyODYyOTg1MjE3Iiwic3ViIjoie1wiaWRcIjoxNjQwOTc2ODgyODYyOTg1MjE3LFwibW9iaWxlXCI6XCIrODYxNzM0NTA0MzM2NVwifSIsImV4cCI6MTcwNDE4MTY4Nn0.lj0hwmWyy_h5F4PSoE8ldC6na6xkFIoz4YLEiaIEOuosJCcvKWcFrYXZU8oWh4wRF514sBFdV9eFCYi8ZuB06Q'}

    req=requests.post(url=url,json=data,headers=header)
    readlist=req.json()['data']['comprehension_list']

    return readlist,id
if __name__ == '__main__':
    errorlist=[]
    lisenlist=[]
    ################################接口返回题目数量不一致问题######################################
    # a=0
    # while a<200:
    #
    #     timu=checkreadunder(1843)[0]
    #     # print(timu)
    #     timunum=len(timu)
    #     print('返回了%d道题目！' % timunum)
    #     if timunum <5:
    #         print(timu)
    #         break
    #     a+=1
    ################################查找听音选句题目######################################
    # for bookid in bookidlist:
    #     timu = checkreadunder(bookid)[0]
    #     for ii in range(len(timu)):
    #         title=timu[ii]['contentResp']['title']
    #         if '选择听到的内容' in title:
    #             lisenlist.append(bookid)
    #             break
    # print(lisenlist)
    ################################验证题目顺序######################################
    # for bookid in range(200):
    #     timu = checkreadunder(1842)[0]
    #     for ii in range(len(timu)):
    #         title=timu[ii]['contentResp']['title']
    #         print(timu[ii]['itemRespList'])

    ################################M级别以下无阅读理解######################################
    # for i in bookidlist:
    #     sepon=checkreadunder(i)
    #     if sepon=="" or sepon is None:
    #         errorlist.append(i)
    #
    # print(errorlist)


# error=[2462, 2245, 806, 375, 2571, 2165, 2159, 2554, 966, 2148, 2536, 2179, 835, 833, 2160, 1029, 2174, 2154, 2142, 2533, 919, 2527, 2522, 838, 843, 969, 836, 844, 851, 2176, 2156, 837, 827, 841, 845, 2172, 850, 846, 849, 847, 839, 840, 830, 827, 666, 2525, 1262, 2222, 1254, 2235, 1179, 429, 2532, 424, 2528, 2219, 421, 2331, 2320, 102, 2339, 2239, 2237, 99, 1260, 1242, 2325, 98, 933, 2529, 1009, 396, 1253, 2227, 426, 1258, 2521, 925, 2231, 84, 1259, 1261, 71, 415, 101, 1009, 103, 2237, 1257, 2225, 1266, 1020, 2196, 1264, 1099, 1089, 1090, 900, 2253, 1018, 1121, 2202, 2206, 2256, 1094, 1265, 2246, 1118, 2223, 2210, 2251, 2249, 2214, 2205, 1112, 1105, 1103, 1097, 1117, 853, 1119, 1090, 1107, 1095, 1101, 1265, 1098, 854, 1102, 1122, 1114, 2242, 2199, 2544, 1182, 2547, 1011, 2264, 2236, 1177, 1186, 2240, 2241, 2250, 2262, 1187, 665, 2266, 914, 2238, 1185, 2260, 1181, 1189, 375, 1175, 1172, 2252, 1180, 1183, 915, 2243, 2255, 912, 2259, 2250, 1184, 2234, 920, 915, 1173, 1188, 1174, 1144, 1148, 2348, 2549, 2362, 2398, 2399, 2400, 2349, 2395, 1104, 2354, 1096, 2357, 1139, 2548, 1195, 1147, 2359, 2394, 1208, 2397, 1093, 1194, 1199, 1207, 1203, 1192, 2396, 1200, 1145, 1150, 1196, 1193, 1141, 1197, 2545, 2351, 1198, 1206, 1091, 1202, 2295, 2279, 2310, 2582, 2285, 1025, 2319, 2314, 2559, 1046, 2316, 2297, 2321, 2434, 2289, 1024, 2299, 2293, 2291, 893, 1042, 2302, 936, 2318, 2307, 1014, 891, 2275, 1039, 1040, 898, 2277, 2555, 2564, 1015, 1019, 1012, 1041, 965, 995, 1028, 2312, 1007, 2272, 1021, 2298, 1033, 927, 1083, 2552, 2268, 2263, 2270, 2271, 2274, 2286, 2258, 2267, 2261, 2281, 2294, 1031, 1120, 2269, 2290, 1153, 1129, 967, 923, 1124, 1013, 916, 1035, 2276, 1123, 1037, 1081, 1137, 1022, 1128, 1032, 2418, 2416, 2420, 2402, 1212, 2401, 1157, 2557, 1155, 1154, 2405, 2413, 1134, 2412, 2403, 1140, 902, 1126, 1125, 911, 1043, 2407, 1143, 1106, 1228, 2561, 1135, 1127, 1138, 1146, 897, 1224, 2306, 2653, 2304, 2668, 1213, 1073, 2661, 2309, 1225, 2300, 1077, 2311, 2655, 1108, 2649, 1068, 1061, 1223, 2659, 1113, 2308, 1214, 2611, 2645, 922, 1152, 1056, 2639, 899, 2337, 1065, 2598, 1045, 2335, 2599, 1109, 2612, 2591, 2592, 2600, 2596, 2345, 2580, 2329, 2589, 2323, 2610, 2595, 2603, 1086, 1087, 1057, 1072, 1054, 895, 2429, 2421, 2662, 2702, 1162, 2635, 2428, 2425, 2424, 2423, 2426, 1159, 2646, 2648, 2642, 1165, 1166, 1160, 2675, 905, 2665, 903, 908, 1158, 909, 1161, 910, 907, 892, 1163, 2631, 2624, 2632, 1130, 2373, 1171, 2637, 2372, 2355, 2651, 2640, 2634, 2626, 2658, 2615, 1074, 1169, 1168, 2647, 1133, 1066, 1047, 1067, 1170, 1059, 2365, 1131, 1069, 1132, 1044, 1070, 1221, 1247, 1219, 1227, 2597, 1244, 1245, 2581, 2627, 2327, 2621, 2338, 1079, 2623, 2326, 2811, 1055, 1080, 2604, 1078, 1246, 1216, 1151, 2614, 1218, 1251, 1220, 1076, 1249, 1250, 2371, 2814, 2813, 2720, 2376, 2377, 2379, 2380, 2382, 2384, 2385, 2387, 2389, 2392, 2353, 1229, 1241, 2663, 2347, 2674, 2669, 2350, 2712, 2680, 2358, 1051, 2723, 2741, 2667, 2660, 2714, 2685, 2705, 2707, 2709, 2710, 2721, 2729, 2732, 2737, 2726, 2711, 2713, 2717, 2718, 2725, 2730, 2731, 2734, 2738, 2739, 2716, 2722, 2727, 2736, 2742]
#
# errorlist1=[]
# for ii in error:
#     if ii in bookidlist:
#         errorlist1.append(ii)
#
# print(errorlist1)