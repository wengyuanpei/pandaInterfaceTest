import chardet
import requests
from time import sleep


def emcode_check(text):
    encodde=chardet.detect(text)
    print("返回的字幕的编码格式》》》》》》》》》",encodde)
url='https://business.xiongmaoboshi.com/lighthouse/file/f2b5370635d26919815c25c277baf242.lrc'
rep=requests.get(url)
dev_get_video_info='https://hear-dev.abctime.com/v1/media/audio/'
#
# # aa=[236,33, 66734, 66735, 66736, 66740, 66741, 66745, 66746, 66747, 66752, 66753, 66754, 8256, 8257, 8258, 8259, 8260, 8261, 8262, 8263, 8264, 8265, 8266, 8267, 8268, 8269, 8270, 8271, 8272, 8273, 8274, 8275, 8276, 8277, 8278, 8279, 8280, 8281, 8282, 8283, 8284, 8285, 66755, 66756, 66757, 66758, 66759, 66760, 66761, 66762, 66763, 66764, 66765, 66766, 66769, 66773, 66782, 8286, 8287, 8288, 8289, 8290, 8291, 8292, 8293, 8294, 8295, 8297, 8298, 8299, 8300, 8301, 8302, 8303, 8304, 8305, 8306, 8307, 8308, 8309, 8310, 8311, 8312, 8313, 8314, 8315, 66784, 66786, 66787, 66788, 66789, 66791, 66793, 66794, 66796, 66797, 66801, 66803, 66804, 66805, 66806, 66807, 66808, 66809, 66810, 66811, 66812, 202043, 202044, 202045, 202046, 202047, 202055, 202056, 202057, 202058, 8316, 8317, 8318, 8319, 8320, 8321, 8322, 8323, 8324, 8325, 8326, 8327, 8328, 8329, 8330, 8331, 8332, 8333, 8334, 8335, 8336, 8337, 8338, 8339, 66813, 66814, 66815, 66816, 66817, 66818, 66820, 66821, 66822, 66823, 66824, 66825, 66826, 66827, 66828, 66829, 66830, 66831, 66832, 66833, 66834, 66835, 66836, 66837, 66838, 66839, 202048, 202049, 202050, 8340, 8341, 8342, 66840, 66841, 66842, 66844, 66845, 66846, 66847, 66848, 66849, 66850, 66851, 66852, 66853, 66854, 66855, 66856, 66857, 66858, 66859, 66860, 66861, 66862, 66863, 66864, 202054, 8343, 8344, 8345, 8346, 8347, 8348, 8349, 8350, 8351, 8352, 8353, 8354, 8355, 8356, 8357, 66874, 66875, 66876, 66877, 66878, 66879, 66880, 66881, 66882, 66883, 66884, 66885, 66886, 66887, 66888, 66889, 66890, 66891, 66892, 8358, 8359, 8360, 8361, 8362, 8363, 8364, 8365, 8366, 8367, 8368, 8369, 8370, 8371, 8372, 8373, 8374, 8375, 8376, 8377, 8378, 8379, 8380, 66904, 66905, 66906, 66907, 66908, 66909, 66910, 66911, 66912, 66913, 66914, 66915, 202051, 202052, 202053]
aa=[66672, 66679, 66681, 66687, 66701, 66702, 66707, 66720, 66722, 66723, 66725, 66726, 66727, 66729, 66730, 66733, 66734, 66735, 66736, 66740, 66741, 66745, 66746, 66747, 66752, 66753, 66754, 66755, 66756, 66757, 66758, 66759, 66760, 66761, 66762, 66763, 66764, 66765, 66766, 66769, 66773, 66782, 66806, 202043, 202044, 202045, 202046, 202047, 66813, 66820, 66831, 66832, 66833, 66834, 202048, 202049, 202050, 66842, 66860, 66862, 66863, 202054, 66882, 66883, 66884, 66885, 66887, 66889, 66891, 66892, 66904, 66906, 66908, 66911, 66912, 66913, 66915, 202051, 202052, 202053]

header={"Authorization":"Bearer eyJhbGciOiJIUzUxMiJ9.eyJqdGkiOiIxNTQ3NDU0MzI0MjgzODc1MzI5Iiwic3ViIjoie1wiaWRcIjoxNTQ3NDU0MzI0MjgzODc1MzI5LFwibW9iaWxlXCI6XCIrODYxNzM0NTA0MzM2NlwifSIsImV4cCI6MTY5OTMyNTc0OH0.E6hvhq2MCrptPgw6xX5zyuGqkbm4BQhVeHaUAMvbPCqlIwBEBpc0MQwqd94G3BURAiZQPw6MYvizssuP-EhmAQ"}
list=[]
for L1video_id in aa:

    if len(str(L1video_id))>4:

        list.append(L1video_id)

        dev_get_video_info1=dev_get_video_info+str(L1video_id)

        dev_get_video_info2=requests.get(url=dev_get_video_info1,headers=header)

        try:
            play_url=dev_get_video_info2.json()['data']['urls']['playUrls'][0]['playUrl']
            print(play_url)
        except:
            print("请求没有",dev_get_video_info2.json())

    else:
        print('错误id',L1video_id)
print(list)
# print(rep.text.encode('gbk'))
# aa=rep.text.encode('gbk').decode('gbk')
# print(aa)
#
# emcode_check(rep.text.encode('gbk'))

def listcheck(list):
    list1 = []
    for L1video_id in list:
        if len(str(L1video_id)) > 4:
            list1.append(L1video_id)
            print('需要检查的id',list1)